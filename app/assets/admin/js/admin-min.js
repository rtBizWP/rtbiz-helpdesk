/*! 
 * rtBiz Helpdesk JavaScript Library 
 * @package rtBiz Helpdesk 
 */(function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a){return function(b){return this.lang().ordinal(a.call(this,b))}}function d(){}function e(a){g(this,a)}function f(a){var b=this._data={},c=a.years||a.year||a.y||0,d=a.months||a.month||a.M||0,e=a.weeks||a.week||a.w||0,f=a.days||a.day||a.d||0,g=a.hours||a.hour||a.h||0,i=a.minutes||a.minute||a.m||0,j=a.seconds||a.second||a.s||0,k=a.milliseconds||a.millisecond||a.ms||0;this._milliseconds=k+1e3*j+6e4*i+36e5*g,this._days=f+7*e,this._months=d+12*c,b.milliseconds=k%1e3,j+=h(k/1e3),b.seconds=j%60,i+=h(j/60),b.minutes=i%60,g+=h(i/60),b.hours=g%24,f+=h(g/24),f+=7*e,b.days=f%30,d+=h(f/30),b.months=d%12,c+=h(d/12),b.years=c}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c){var d,e=b._milliseconds,f=b._days,g=b._months;e&&a._d.setTime(+a+e*c),f&&a.date(a.date()+f*c),g&&(d=a.date(),a.date(1).month(a.month()+g*c).date(Math.min(d,a.daysInMonth())))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function m(a,b){return b.abbr=a,J[a]||(J[a]=new d),J[a].set(b),J[a]}function n(a){return a?(!J[a]&&K&&require("./lang/"+a),J[a]):F.fn._lang}function o(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function p(a){var b,c,d=a.match(M);for(b=0,c=d.length;c>b;b++)ea[d[b]]?d[b]=ea[d[b]]:d[b]=o(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+="function"==typeof d[b].call?d[b].call(e,a):d[b];return f}}function q(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&N.test(b);)b=b.replace(N,c);return ba[b]||(ba[b]=p(b)),ba[b](a)}function r(a){switch(a){case"DDDD":return Q;case"YYYY":return R;case"YYYYY":return S;case"S":case"SS":case"SSS":case"DDD":return P;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return T;case"X":return W;case"Z":case"ZZ":return U;case"T":return V;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return O;default:return new RegExp(a.replace("\\",""))}}function s(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=n(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm="pm"===(b+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,d=(b+"").match($),d&&d[1]&&(c._tzh=~~d[1]),d&&d[2]&&(c._tzm=~~d[2]),d&&"+"===d[0]&&(c._tzh=-c._tzh,c._tzm=-c._tzm)}null==b&&(c._isValid=!1)}function t(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=a._tzh||0,d[4]+=a._tzm||0,c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function u(a){var b,c,d=a._f.match(M),e=a._i;for(a._a=[],b=0;b<d.length;b++)c=(r(d[b]).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),ea[d[b]]&&s(d[b],c,a);a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),t(a)}function v(a){for(var b,c,d,f,h=99;a._f.length;){if(b=g({},a),b._f=a._f.pop(),u(b),c=new e(b),c.isValid()){d=c;break}f=l(b._a,c.toArray()),h>f&&(h=f,d=c)}g(a,d)}function w(a){var b,c=a._i;if(X.exec(c)){for(a._f="YYYY-MM-DDT",b=0;4>b;b++)if(Z[b][1].exec(c)){a._f+=Z[b][0];break}U.exec(c)&&(a._f+=" Z"),u(a)}else a._d=new Date(c)}function x(b){var c=b._i,d=L.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?w(b):k(c)?(b._a=c.slice(0),t(b)):b._d=new Date(c instanceof Date?+c:c)}function y(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function z(a,b,c){var d=I(Math.abs(a)/1e3),e=I(d/60),f=I(e/60),g=I(f/24),h=I(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",I(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,y.apply({},i)}function A(a,b,c){var d=c-b,e=c-a.day();return e>d&&(e-=7),d-7>e&&(e+=7),Math.ceil(F(a).add("d",e).dayOfYear()/7)}function B(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=n().preparse(b)),F.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?v(a):u(a):x(a),new e(a))}function C(a,b){F.fn[a]=F.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function D(a){F.duration.fn[a]=function(){return this._data[a]}}function E(a,b){F.duration.fn["as"+a]=function(){return+this/b}}for(var F,G,H="2.0.0",I=Math.round,J={},K="undefined"!=typeof module&&module.exports,L=/^\/?Date\((\-?\d+)/i,M=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,O=/\d\d?/,P=/\d{1,3}/,Q=/\d{3}/,R=/\d{1,4}/,S=/[+\-]?\d{1,6}/,T=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,U=/Z|[\+\-]\d\d:?\d\d/i,V=/T/i,W=/[\+\-]?\d+(\.\d{1,3})?/,X=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Y="YYYY-MM-DDTHH:mm:ssZ",Z=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],$=/([\+\-]|\d\d)/gi,_="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),aa={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ba={},ca="DDD w W M D d".split(" "),da="M D H h m s w W".split(" "),ea={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return i(~~(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(a/60),2)+":"+i(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(10*a/6),4)},X:function(){return this.unix()}};ca.length;)G=ca.pop(),ea[G+"o"]=c(ea[G]);for(;da.length;)G=da.pop(),ea[G+G]=b(ea[G],2);for(ea.DDDD=b(ea.DDD,3),d.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=F([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return A(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},F=function(a,b,c){return B({_i:a,_f:b,_l:c,_isUTC:!1})},F.utc=function(a,b,c){return B({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},F.unix=function(a){return F(1e3*a)},F.duration=function(a,b){var c,d=F.isDuration(a),e="number"==typeof a,g=d?a._data:e?{}:a;return e&&(b?g[b]=a:g.milliseconds=a),c=new f(g),d&&a.hasOwnProperty("_lang")&&(c._lang=a._lang),c},F.version=H,F.defaultFormat=Y,F.lang=function(a,b){return a?(b?m(a,b):J[a]||n(a),void(F.duration.fn._lang=F.fn._lang=n(a))):F.fn._lang._abbr},F.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),n(a)},F.isMoment=function(a){return a instanceof e},F.isDuration=function(a){return a instanceof f},F.fn=e.prototype={clone:function(){return F(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return F.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._a?this._isValid=!l(this._a,(this._isUTC?F.utc(this._a):F(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){var b=q(this,a||F.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?F.duration(+b,a):F.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?F.duration(+b,a):F.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?F(a).utc():F(a).local(),g=6e4*(this.zone()-f.zone());return b&&(b=b.replace(/s$/,"")),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-F(this).startOf("month")-(f-F(f).startOf("month")))/d,"year"===b&&(e/=12)):(d=this-f-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?d/864e5:"week"===b?d/6048e5:d),c?e:h(e)},from:function(a,b){return F.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(F(),a)},calendar:function(){var a=this.diff(F().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<F([this.year()]).zone()||this.zone()<F([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a=a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.day(0),this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+F(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+F(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+F(a).startOf(b)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return F.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=I((F(this).startOf("day")-F(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},isoWeek:function(a){var b=A(this,1,4);return null==a?b:this.add("d",7*(a-b))},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},lang:function(b){return b===a?this._lang:(this._lang=n(b),this)}},G=0;G<_.length;G++)C(_[G].toLowerCase().replace(/s$/,""),_[G]);C("year","FullYear"),F.fn.days=F.fn.day,F.fn.weeks=F.fn.week,F.fn.isoWeeks=F.fn.isoWeek,F.duration.fn=f.prototype={weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(a){var b=+this,c=z(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},lang:F.fn.lang};for(G in aa)aa.hasOwnProperty(G)&&(E(G,aa[G]),D(G.toLowerCase()));E("Weeks",6048e5),F.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),K&&(module.exports=F),"undefined"==typeof ender&&(this.moment=F),"function"==typeof define&&define.amd&&define("moment",[],function(){return F})}).call(this),!function(a,b){function c(a,b){o(a).push(b)}function d(d,e,f){var g=d.children(e.headerTag),h=d.children(e.bodyTag);g.length>h.length?R(Z,"contents"):g.length<h.length&&R(Z,"titles");var i=e.startIndex;if(f.stepCount=g.length,e.saveState&&a.cookie){var j=a.cookie(U+q(d)),k=parseInt(j,0);!isNaN(k)&&k<f.stepCount&&(i=k)}f.currentIndex=i,g.each(function(e){var f=a(this),g=h.eq(e),i=g.data("mode"),j=null==i?$.html:r($,/^\s*$/.test(i)||isNaN(i)?i:parseInt(i,0)),k=j===$.html||g.data("url")===b?"":g.data("url"),l=j!==$.html&&"1"===g.data("loaded"),m=a.extend({},ba,{title:f.html(),content:j===$.html?g.html():"",contentUrl:k,contentMode:j,contentLoaded:l});c(d,m)})}function e(a){a.triggerHandler("canceled")}function f(a,b){return a.currentIndex-b}function g(b,c){var d=i(b);b.unbind(d).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(d),b.removeClass(c.clearFixCssClass+" vertical");var e=b.find(".content > *");e.removeData("loaded").removeData("mode").removeData("url"),e.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),b.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var f=a('<{0} class="{1}"></{0}>'.format(b.get(0).tagName,b.attr("class"))),g=b._id();return null!=g&&""!==g&&f._id(g),f.html(b.find(".content").html()),b.after(f),b.remove(),f}function h(a,b){var c=a.find(".steps li").eq(b.currentIndex);a.triggerHandler("finishing",[b.currentIndex])?(c.addClass("done").removeClass("error"),a.triggerHandler("finished",[b.currentIndex])):c.addClass("error")}function i(a){var b=a.data("eventNamespace");return null==b&&(b="."+q(a),a.data("eventNamespace",b)),b}function j(a,b){var c=q(a);return a.find("#"+c+V+b)}function k(a,b){var c=q(a);return a.find("#"+c+W+b)}function l(a,b){var c=q(a);return a.find("#"+c+X+b)}function m(a){return a.data("options")}function n(a){return a.data("state")}function o(a){return a.data("steps")}function p(a,b){var c=o(a);return(0>b||b>=c.length)&&R(Y),c[b]}function q(a){var b=a.data("uid");return null==b&&(b=a._id(),null==b&&(b="steps-uid-".concat(T),a._id(b)),T++,a.data("uid",b)),b}function r(a,c){if(S("enumType",a),S("keyOrValue",c),"string"==typeof c){var d=a[c];return d===b&&R("The enum key '{0}' does not exist.",c),d}if("number"==typeof c){for(var e in a)if(a[e]===c)return c;R("Invalid enum value '{0}'.",c)}else R("Invalid key or value type.")}function s(a,b,c){return B(a,b,c,v(c,1))}function t(a,b,c){return B(a,b,c,f(c,1))}function u(a,b,c,d){if((0>d||d>=c.stepCount)&&R(Y),!(b.forceMoveForward&&d<c.currentIndex)){var e=c.currentIndex;return a.triggerHandler("stepChanging",[c.currentIndex,d])?(c.currentIndex=d,O(a,b,c),E(a,b,c,e),D(a,b,c),A(a,b,c),P(a,b,c,d,e,function(){a.triggerHandler("stepChanged",[d,e])})):a.find(".steps li").eq(e).addClass("error"),!0}}function v(a,b){return a.currentIndex+b}function w(b){var c=a.extend(!0,{},ca,b);return this.each(function(){var b=a(this),e={currentIndex:c.startIndex,currentStep:null,stepCount:0,transitionElement:null};b.data("options",c),b.data("state",e),b.data("steps",[]),d(b,c,e),J(b,c,e),G(b,c),c.autoFocus&&0===T&&j(b,c.startIndex).focus(),b.triggerHandler("init",[c.startIndex])})}function x(b,c,d,e,f){(0>e||e>d.stepCount)&&R(Y),f=a.extend({},ba,f),y(b,e,f),d.currentIndex!==d.stepCount&&d.currentIndex>=e&&(d.currentIndex++,O(b,c,d)),d.stepCount++;var g=b.find(".content"),h=a("<{0}>{1}</{0}>".format(c.headerTag,f.title)),i=a("<{0}></{0}>".format(c.bodyTag));return(null==f.contentMode||f.contentMode===$.html)&&i.html(f.content),0===e?g.prepend(i).prepend(h):k(b,e-1).after(i).after(h),K(b,d,i,e),N(b,c,d,h,e),F(b,c,d,e),e===d.currentIndex&&E(b,c,d),D(b,c,d),b}function y(a,b,c){o(a).splice(b,0,c)}function z(b){var c=a(this),d=m(c),e=n(c);if(d.suppressPaginationOnFocus&&c.find(":focus").is(":input"))return b.preventDefault(),!1;var f={left:37,right:39};b.keyCode===f.left?(b.preventDefault(),t(c,d,e)):b.keyCode===f.right&&(b.preventDefault(),s(c,d,e))}function A(b,c,d){if(d.stepCount>0){var e=d.currentIndex,f=p(b,e);if(!c.enableContentCache||!f.contentLoaded)switch(r($,f.contentMode)){case $.iframe:b.find(".content > .body").eq(d.currentIndex).empty().html('<iframe src="'+f.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case $.async:var g=k(b,e)._aria("busy","true").empty().append(M(c.loadingTemplate,{text:c.labels.loading}));a.ajax({url:f.contentUrl,cache:!1}).done(function(a){g.empty().html(a)._aria("busy","false").data("loaded","1"),b.triggerHandler("contentLoaded",[e])})}}}function B(a,b,c,d){var e=c.currentIndex;if(d>=0&&d<c.stepCount&&!(b.forceMoveForward&&d<c.currentIndex)){var f=j(a,d),g=f.parent(),h=g.hasClass("disabled");return g._enableAria(),f.click(),e===c.currentIndex&&h?(g._enableAria(!1),!1):!0}return!1}function C(b){b.preventDefault();var c=a(this),d=c.parent().parent().parent().parent(),f=m(d),g=n(d),i=c.attr("href");switch(i.substring(i.lastIndexOf("#")+1)){case"cancel":e(d);break;case"finish":h(d,g);break;case"next":s(d,f,g);break;case"previous":t(d,f,g)}}function D(a,b,c){if(b.enablePagination){var d=a.find(".actions a[href$='#finish']").parent(),e=a.find(".actions a[href$='#next']").parent();if(!b.forceMoveForward){var f=a.find(".actions a[href$='#previous']").parent();f._enableAria(c.currentIndex>0)}b.enableFinishButton&&b.showFinishButtonAlways?(d._enableAria(c.stepCount>0),e._enableAria(c.stepCount>1&&c.stepCount>c.currentIndex+1)):(d._showAria(b.enableFinishButton&&c.stepCount===c.currentIndex+1),e._showAria(0===c.stepCount||c.stepCount>c.currentIndex+1)._enableAria(c.stepCount>c.currentIndex+1||!b.enableFinishButton))}}function E(b,c,d,e){var f=j(b,d.currentIndex),g=a('<span class="current-info audible">'+c.labels.current+" </span>"),h=b.find(".content > .title");if(null!=e){var i=j(b,e);i.parent().addClass("done").removeClass("error")._selectAria(!1),h.eq(e).removeClass("current").next(".body").removeClass("current"),g=i.find(".current-info"),f.focus()}f.prepend(g).parent()._selectAria().removeClass("done")._enableAria(),h.eq(d.currentIndex).addClass("current").next(".body").addClass("current")}function F(a,b,c,d){for(var e=q(a),f=d;f<c.stepCount;f++){var g=e+V+f,h=e+W+f,i=e+X+f,j=a.find(".title").eq(f)._id(i);a.find(".steps a").eq(f)._id(g)._aria("controls",h).attr("href","#"+i).html(M(b.titleTemplate,{index:f+1,title:j.html()})),a.find(".body").eq(f)._id(h)._aria("labelledby",i)}}function G(a,b){var c=i(a);a.bind("canceled"+c,b.onCanceled),a.bind("contentLoaded"+c,b.onContentLoaded),a.bind("finishing"+c,b.onFinishing),a.bind("finished"+c,b.onFinished),a.bind("init"+c,b.onInit),a.bind("stepChanging"+c,b.onStepChanging),a.bind("stepChanged"+c,b.onStepChanged),b.enableKeyNavigation&&a.bind("keyup"+c,z),a.find(".actions a").bind("click"+c,C)}function H(a,b,c,d){return 0>d||d>=c.stepCount||c.currentIndex===d?!1:(I(a,d),c.currentIndex>d&&(c.currentIndex--,O(a,b,c)),c.stepCount--,l(a,d).remove(),k(a,d).remove(),j(a,d).parent().remove(),0===d&&a.find(".steps li").first().addClass("first"),d===c.stepCount&&a.find(".steps li").eq(d).addClass("last"),F(a,b,c,d),D(a,b,c),!0)}function I(a,b){o(a).splice(b,1)}function J(b,c,d){var e='<{0} class="{1}">{2}</{0}>',f=r(_,c.stepsOrientation),g=f===_.vertical?" vertical":"",h=a(e.format(c.contentContainerTag,"content "+c.clearFixCssClass,b.html())),i=a(e.format(c.stepsContainerTag,"steps "+c.clearFixCssClass,'<ul role="tablist"></ul>')),j=h.children(c.headerTag),k=h.children(c.bodyTag);b.attr("role","application").empty().append(i).append(h).addClass(c.cssClass+" "+c.clearFixCssClass+g),k.each(function(c){K(b,d,a(this),c)}),j.each(function(e){N(b,c,d,a(this),e)}),E(b,c,d),L(b,c,d)}function K(a,b,c,d){var e=q(a),f=e+W+d,g=e+X+d;c._id(f).attr("role","tabpanel")._aria("labelledby",g).addClass("body")._showAria(b.currentIndex===d)}function L(a,b,c){if(b.enablePagination){var d='<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',e='<li><a href="#{0}" role="menuitem">{1}</a></li>',f="";b.forceMoveForward||(f+=e.format("previous",b.labels.previous)),f+=e.format("next",b.labels.next),b.enableFinishButton&&(f+=e.format("finish",b.labels.finish)),b.enableCancelButton&&(f+=e.format("cancel",b.labels.cancel)),a.append(d.format(b.actionContainerTag,b.clearFixCssClass,b.labels.pagination,f)),D(a,b,c),A(a,b,c)}}function M(a,c){for(var d=a.match(/#([a-z]*)#/gi),e=0;e<d.length;e++){var f=d[e],g=f.substring(1,f.length-1);c[g]===b&&R("The key '{0}' does not exist in the substitute collection!",g),a=a.replace(f,c[g])}return a}function N(b,c,d,e,f){var g=q(b),h=g+V+f,j=g+W+f,k=g+X+f,l=b.find(".steps > ul"),m=M(c.titleTemplate,{index:f+1,title:e.html()}),n=a('<li role="tab"><a id="'+h+'" href="#'+k+'" aria-controls="'+j+'">'+m+"</a></li>");n._enableAria(c.enableAllSteps||d.currentIndex>f),d.currentIndex>f&&n.addClass("done"),e._id(k).attr("tabindex","-1").addClass("title"),0===f?l.prepend(n):l.find("li").eq(f-1).after(n),0===f&&l.find("li").removeClass("first").eq(f).addClass("first"),f===d.stepCount-1&&l.find("li").removeClass("last").eq(f).addClass("last"),n.children("a").bind("click"+i(b),Q)}function O(b,c,d){c.saveState&&a.cookie&&a.cookie(U+q(b),d.currentIndex)}function P(b,c,d,e,f,g){var h=b.find(".content > .body"),i=r(aa,c.transitionEffect),j=c.transitionEffectSpeed,k=h.eq(e),l=h.eq(f);switch(i){case aa.fade:case aa.slide:var m=i===aa.fade?"fadeOut":"slideUp",o=i===aa.fade?"fadeIn":"slideDown";d.transitionElement=k,l[m](j,function(){var b=a(this)._showAria(!1).parent().parent(),c=n(b);c.transitionElement&&(c.transitionElement[o](j,function(){a(this)._showAria()}).promise().done(g),c.transitionElement=null)});break;case aa.slideLeft:var p=l.outerWidth(!0),q=e>f?-p:p,s=e>f?p:-p;a.when(l.animate({left:q},j,function(){a(this)._showAria(!1)}),k.css("left",s+"px")._showAria().animate({left:0},j)).done(g);break;default:a.when(l._showAria(!1),k._showAria()).done(g)}}function Q(b){b.preventDefault();var c=a(this),d=c.parent().parent().parent().parent(),e=m(d),f=n(d),g=f.currentIndex;if(c.parent().is(":not(.disabled):not(.current)")){var h=c.attr("href"),i=parseInt(h.substring(h.lastIndexOf("-")+1),0);u(d,e,f,i)}return g===f.currentIndex?(j(d,g).focus(),!1):void 0}function R(a){throw arguments.length>1&&(a=a.format(Array.prototype.slice.call(arguments,1))),new Error(a)}function S(a,b){null==b&&R("The argument '{0}' is null or undefined.",a)}a.fn.extend({_aria:function(a,b){return this.attr("aria-"+a,b)},_removeAria:function(a){return this.removeAttr("aria-"+a)},_enableAria:function(a){return null==a||a?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(a){return null==a||a?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(a){return null==a||a?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(a){return a?this.attr("id",a):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var b=1===arguments.length&&a.isArray(arguments[0])?arguments[0]:arguments,c=this,d=0;d<b.length;d++){var e=new RegExp("\\{"+d+"\\}","gm");c=c.replace(e,b[d])}return c});var T=0,U="jQu3ry_5teps_St@te_",V="-t-",W="-p-",X="-h-",Y="Index out of range.",Z="One or more corresponding step {0} are missing.";a.fn.steps=function(b){return a.fn.steps[b]?a.fn.steps[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.steps"):w.apply(this,arguments)},a.fn.steps.add=function(a){var b=n(this);return x(this,m(this),b,b.stepCount,a)},a.fn.steps.destroy=function(){return g(this,m(this))},a.fn.steps.finish=function(){h(this,n(this))},a.fn.steps.getCurrentIndex=function(){return n(this).currentIndex},a.fn.steps.getCurrentStep=function(){return p(this,n(this).currentIndex)},a.fn.steps.getStep=function(a){return p(this,a)},a.fn.steps.insert=function(a,b){return x(this,m(this),n(this),a,b)},a.fn.steps.next=function(){return s(this,m(this),n(this))},a.fn.steps.previous=function(){return t(this,m(this),n(this))},a.fn.steps.remove=function(a){return H(this,m(this),n(this),a)},a.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},a.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var $=a.fn.steps.contentMode={html:0,iframe:1,async:2},_=a.fn.steps.stepsOrientation={horizontal:0,vertical:1},aa=a.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},ba=a.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:$.html,contentLoaded:!1},ca=a.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:_.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:aa.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return!0},onFinished:function(){},onContentLoaded:function(){},onInit:function(){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),jQuery(document).ready(function(a){var b,c=!1,d=0,e={init:function(){e.setup_wizard(),e.search_users(),e.add_user_single(),e.assingee_page(),e.setup_start(),e.acl_save(),e.get_acl_view()},setup_start:function(){a(document).on("click","#rthd-setup-start",function(){a(".rtb-setup-header").remove(),a("#wizard").show()})},setup_wizard:function(){b=jQuery("#wizard").steps({headerTag:"h3",bodyTag:"fieldset",transitionEffect:"slideLeft",forceMoveForward:!0,onStepChanging:function(a,b,d){return c?(c=!1,!0):1==b?(c=!1,e.connect_store()):0==b?e.support_page():3==b?(e.save_assignee(),!1):2==b?(e.get_assingee_ui(),!1):4==b?(e.get_acl_view(),e.outbound_mail_setu()):!0},onStepChanged:function(a,b,c){return e.custom_page_action(b),!0},onFinishing:function(a,b){return!0},onFinished:function(a,b){window.location.replace(hdDashboardUrl)}})},search_users:function(){jQuery(".rthd-user-autocomplete").length>0&&(jQuery(".rthd-user-autocomplete").autocomplete({source:function(b,c){a.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_search_non_helpdesk_user_from_name",maxRows:10,query:b.term},success:function(b){b.hasOwnProperty("have_access")?(jQuery(".rthd-warning").html("<strong>"+jQuery("#rthd-user-autocomplete").val()+"</strong> Already have helpdesk access"),jQuery(".rthd-warning").show(),c()):b.hasOwnProperty("show_add")?(jQuery(".rthd-warning").html("Hey, Looks like <strong>"+jQuery("#rthd-user-autocomplete").val()+"</strong> is not in your system, would you like to add?"),jQuery(".rthd-importer-add-contact").show(),jQuery("#rthd-new-user-email").val(jQuery("#rthd-user-autocomplete").val()),jQuery(".rthd-warning").show(),c()):(c(a.map(b,function(a){return{id:a.id,imghtml:a.imghtml,label:a.label,editlink:a.editlink}})),jQuery(".rthd-warning").hide(),jQuery(".rthd-importer-add-contact").hide())}})},minLength:2,select:function(a,b){return e.give_user_helpdesk_access(!1,b.item.id),jQuery(".rthd-user-autocomplete").val(""),!1}}).data("ui-Autocomplete")._renderItem=function(b,c){return a("<li></li>").data("ui-autocomplete-item",c).append("<a>"+c.imghtml+"&nbsp;"+c.label+"</a>").appendTo(b)},jQuery(document).on("click","a[href=#removeUser]",function(a){a.preventDefault(),that=this;var b=new Object;b.action="rthd_remove_user",b.userid=jQuery(this).next(".rthd-import-selected-users").val(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:b,success:function(a){a.status&&jQuery(that).parent().remove()}})})),jQuery("#rthd-add-user-domain").length>0&&jQuery("#rthd-add-user-domain").autocomplete({source:function(b,c){a.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_search_domain",maxRows:10,query:b.term},success:function(b){c(a.map(b,function(a){return{name:a,value:a}}))}})},select:function(a,b){jQuery("#rthd-add-user-domain").val(b.item.value),e.import_domain_users(!0)}})},add_user_single:function(){jQuery(".rthd-importer-add-contact").click(function(){e.give_user_helpdesk_access(jQuery("#rthd-new-user-email").val(),!1)}),jQuery("#rthd-get-domain-count-users").click(function(){e.import_domain_users(!0)}),a("#rthd-add-user-domain").on("keypress",function(a){return 13==a.keyCode?(e.import_domain_users(!0),a.preventDefault(),!1):void 0}),jQuery("#rthd-import-domain-users").click(function(){e.import_domain_users(!1)}),jQuery("#rthd-add-all-users").click(function(a){jQuery("#rthd-setup-import-users-progress").show(),e.import_all_users()}),jQuery("#rthd-setup-wizard-support-page").on("change",function(a){val=jQuery(this).val(),-1==val?jQuery(".rthd-setup-wizard-support-page-new-div").show():jQuery(".rthd-setup-wizard-support-page-new-div").is(":visible")&&jQuery(".rthd-setup-wizard-support-page-new-div").hide()})},support_page:function(){var a=new Object;if(a.action="rthd_setup_support_page",val=jQuery("#rthd-setup-wizard-support-page").val(),
0==val||0===jQuery("#rthd-setup-wizard-support-page-new").val().length&&!jQuery("#rthd-setup-wizard-support-page-new").val().trim()){var b=confirm("Do you want to skip this step ?");return 1==b?!0:(jQuery(".rthd-support-process").hide(),!1)}-1==val?jQuery(".rthd-setup-wizard-support-page-new-div").is(":visible")&&(a.new_page=jQuery("#rthd-setup-wizard-support-page-new").val(),a.page_action="add"):a.old_page=val,0!==val&&(jQuery(".rthd-support-process").show(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:a,success:function(a){a.status&&(jQuery(".rthd-support-process").hide(),c=!0,jQuery(".wizard").steps("next"))}}))},import_all_users:function(){var b=new Object;b.action="rthd_import_all_users",b.nonce=jQuery("#import_all_users").val(),b["import"]=!0,jQuery("#rthd-import-all-spinner").show(),jQuery("#rthd-all-import-message").html(""),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:b,success:function(b){if(b.status){var c=jQuery("#rthd-setup-import-all-count").val();c=parseInt(c)-parseInt(b.imported_count),d+=parseInt(b.imported_count);var f=jQuery("#rthd-setup-import-users-progress").val();f=parseInt(f)+parseInt(b.imported_count),jQuery("#rthd-setup-import-users-progress").val(f),b.hasOwnProperty("imported_users")&&a.each(b.imported_users,function(a,b){e.add_contact_to_list(b.id,b.label,b.imghtml,b.editlink)}),b.remain_import>0?(jQuery("#rthd-setup-import-all-count").val(c),e.import_all_users()):(jQuery("#rthd-import-all-spinner").hide(),jQuery("#rthd-setup-import-users-progress").hide(),jQuery("#rthd-all-import-message").html(0==d?"No Users Found":d+" Users Added"))}}})},import_domain_users:function(b){var c=new Object;jQuery("#rthd-domain-import-spinner").show(),c.action="rthd_domain_search_and_import",c.count=b,c.domain_query=jQuery("#rthd-add-user-domain").val(),c.nonce=jQuery("#import_domain").val(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:c,success:function(b){b.status&&(b.hasOwnProperty("count")?jQuery("#rthd-domain-import-message").html("Found "+b.count+" Users"):(b.hasOwnProperty("imported_users")&&a.each(b.imported_users,function(a,b){e.add_contact_to_list(b.id,b.label,b.imghtml,b.editlink)}),b.imported_all?jQuery("#rthd-domain-import-message").html(b.hasOwnProperty("imported_users")?"Imported "+b.imported_users.length+" Users":"No Users to Add"):b.hasOwnProperty("not_imported_users")&&jQuery("#rthd-domain-import-message").html("Could not import "+b.not_imported_users.length)),jQuery("#rthd-domain-import-message").show()),jQuery("#rthd-domain-import-spinner").hide()}})},give_user_helpdesk_access:function(a,b){jQuery("#rthd-autocomplete-page-spinner").show();var c=new Object;0!=a&&(c.email=a),0!=b&&(c.ID=b),c.action="rthd_creater_rtbiz_and_give_access_helpdesk",jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:c,success:function(a){jQuery(".rthd-warning").is(":visible")&&(jQuery(".rthd-warning").html(""),jQuery(".rthd-warning").hide()),jQuery(".rthd-importer-add-contact").is(":visible")&&jQuery(".rthd-importer-add-contact").hide(),e.add_contact_to_list(a.id,a.label,a.imghtml,a.editlink),jQuery("#rthd-autocomplete-page-spinner").hide()}})},add_contact_to_list:function(a,b,c,d){jQuery(".rthd_selected_user").is(":visible")||jQuery(".rthd_selected_user").show(),jQuery("#imported-user-auth-"+a).length<1&&jQuery(".rthd-setup-list-users").append("<li id='imported-user-auth-"+a+"' class='contact-list' >"+c+"<a class='rthd-setup-user-title heading' target='_blank' href='"+d+"'>"+b+"</a> <a href='#removeUser' class='delete_row'>×</a> <input type='hidden' class='rthd-import-selected-users' name='import_users[]' value='"+a+"' /></li>")},connect_store:function(){var b=[];if(jQuery("input:checkbox[name=rthd-wizard-store]:checked").each(function(){b.push(a(this).val())}),!(b.length>0))return!0;var d=new Object;d.store=b,d.action="rthd_offering_sync",jQuery(".rthd-store-process").show(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:d,success:function(a){a.status&&(c=!0,jQuery(".wizard").steps("next"))}})},get_assingee_ui:function(){jQuery(".rthd-team-setup-loading").show(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_get_default_assignee_ui"},success:function(a){a.status&&(jQuery("#rthd-setup-set-assignee-ui").html(a.html),jQuery(".rthd-team-setup-loading").hide(),c=!0,jQuery(".wizard").steps("next"))}})},save_assignee:function(){jQuery(".rthd-assignee-process").show();var a=[];jQuery(".rthd-setup-assignee").each(function(){var b=new Object;b.term_ID=jQuery(this).attr("data"),b.user_ID=jQuery(this).val(),a.push(b)}),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_setup_wizard_assignee_save",assignee:a,default_assignee:jQuery("#rthd_offering-default").val()},success:function(a){a.status&&(jQuery(".rthd-assignee-process").show(),c=!0,jQuery(".wizard").steps("next"))}})},assingee_page:function(){jQuery("#rthd_offering-default").on("change",function(a){jQuery(".rthd-setup-assignee").val(jQuery(this).val())})},custom_page_action:function(a){},outbound_mail_setu:function(){if(jQuery("#mailbox-list>.rtmailbox-row").length>0)jQuery(".rthd-mailbox-setup-process").show(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_outboud_mail_setup_ui"},success:function(a){a.status&&jQuery("#wizard-p-4").html(a.html),jQuery(".rthd-outbound-setup-process").hide()}});else{if("rthd_outound_setup_wizard"!==jQuery("#rthd_outound_sub-action").val()){var a=confirm("Mailbox is not configured. Do you want to skip this step?");return 1==a?!0:!1}jQuery(".rthd-outbound-setup-process").show(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_outound_setup_wizard",data:jQuery("#rthd_outgoing_mailbox_setup_container").find("select,textarea, input").serialize()},success:function(a){a.status&&(jQuery("#wizard-p-4").html(a.html),c=!0,jQuery(".wizard").steps("next")),jQuery(".rthd-outbound-setup-process").show()}})}},acl_save:function(){jQuery(document).on("change","input.rt-hd-setup-acl:radio",function(a){var b=jQuery(this).data("id"),c=jQuery("#ACL_"+b+" td:last .helpdeskspinner");c.show(),jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_change_ACL",permission:jQuery(this).val(),userid:b},success:function(b){c.hide(),b.status?console.log("Success!"):a.preventDefault()}})})},get_acl_view:function(){jQuery.ajax({url:ajaxurl,dataType:"json",type:"post",data:{action:"rthd_get_ACL"},success:function(a){a.status&&jQuery(".rthd-ACL-change").html(a.html)}})}};e.init()}),jQuery(document).ready(function(){}),jQuery(document).ready(function(){var a,b={rthd_tinymce_set_content:function(a,b){if("undefined"!=typeof tinymce){var c=tinymce.get(a);return c&&c instanceof tinymce.Editor?(c.setContent(b),c.save({no_events:!0})):jQuery("#"+a).val(b),!0}return!1},rthd_tinymce_get_content:function(a){if("undefined"!=typeof tinymce){var b=tinymce.get(a);return b&&b instanceof tinymce.Editor?b.getContent():jQuery("#"+a).val()}return""},init:function(){b.initDatePicket(),b.initDateTimePicker(),b.initMomentJS(),b.initattchmentJS(),b.initExternalFileJS(),b.initSubscriberSearch(),b.initAutoResponseSettings(),b.initBlacklistConfirmationOrRemove(),b.initAddContactBlacklist()},initDatePicket:function(){jQuery(".datepicker").length>0&&jQuery(".datepicker").datepicker({dateFormat:"M d,yy",onClose:function(a,b){if(jQuery(this).hasClass("moment-from-now")){var c=jQuery(this).attr("title");""!=a&&moment(a).isValid()?(jQuery(this).val(moment(new Date(a)).fromNow()),jQuery(this).attr("title",a),jQuery(this).next().length>0&&jQuery(this).next().val(a)):""!=c&&(jQuery(this).val(moment(new Date(c)).fromNow()),jQuery(this).attr("title",c),jQuery(this).next().length>0&&jQuery(this).next().val(a))}}}),jQuery(".datepicker-toggle").click(function(a){jQuery("#"+jQuery(this).data("datepicker")).datepicker("show")})},initDateTimePicker:function(){jQuery(".datetimepicker").length>0&&jQuery(".datetimepicker").datetimepicker({dateFormat:"M d, yy",timeFormat:"hh:mm TT",onClose:function(a,b){var c=jQuery(this).attr("title");""!=a&&moment(a).isValid()&&(jQuery(this).val(moment(new Date(a)).fromNow()),jQuery(this).attr("title",a),jQuery(this).next().length>0?jQuery(this).hasClass("moment-from-now")&&jQuery(this).next().val(a):""!=c&&(jQuery(this).val(moment(new Date(c)).fromNow()),jQuery(this).attr("title",c),jQuery(this).next().length>0&&jQuery(this).next().val(a)))}})},initMomentJS:function(){jQuery(document).on("click",".moment-from-now",function(a){var b=jQuery(this).attr("title");""!=b&&jQuery(this).datepicker("setDate",new Date(jQuery(this).attr("title")))}),jQuery(".moment-from-now").each(function(){jQuery(this).is("input[type='text']")&&""!=jQuery(this).val()?jQuery(this).val(moment(new Date(jQuery(this).attr("title"))).fromNow()):jQuery(this).html(jQuery(this).is(".comment-date")?moment(new Date(jQuery(this).attr("title"))).fromNow():moment(new Date(jQuery(this).html())).fromNow())})},initattchmentJS:function(){jQuery(document).on("click",".rthd_delete_attachment",function(a){a.preventDefault(),jQuery(this).parent().remove()}),jQuery("#add_ticket_attachment").on("click",function(b){return b.preventDefault(),a?void a.open():(a=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),searchable:!0,button:{text:"Attach Selected Files"},multiple:!0}),a.on("select",function(){var b=a.state().get("selection"),c="";b.map(function(a){a=a.toJSON(),c='<li data-attachment-id="'+a.id+'" class="attachment-item row_group">',c+='<a href="#" class="delete_row rthd_delete_attachment">x</a>',c+='<a target="_blank" href="'+a.url+'"><img height="20px" width="20px" src="'+a.icon+'" > '+a.filename+"</a>",c+='<input type="hidden" name="attachment[]" value="'+a.id+'" /></div>',jQuery("#attachment-container .scroll-height").append(c)})}),void a.open())})},initExternalFileJS:function(){var a=12345;jQuery("#add_new_ex_file").click(function(b){var c=jQuery("#add_ex_file_title").val(),d=jQuery("#add_ex_file_link").val();if(""==jQuery.trim(d))return!1;jQuery("#add_ex_file_title").val(""),jQuery("#add_ex_file_link").val("");var e='<div class="row_group">';e+='<button class="delete_row removeMeta"><i class="foundicon-minus"></i>X</button>',e+='<input type="text" name="ticket_ex_files['+a+'][title]" value="'+c+'" />',e+='<input type="text" name="ticket_ex_files['+a+'][link]" value="'+d+'" />',e+="</div>",a++,jQuery("#external-files-container").append(e)})},initSubscriberSearch:function(){try{void 0!=arr_subscriber_user&&(jQuery("#subscriber_user_ac").autocomplete({source:function(a,b){var c=jQuery.ui.autocomplete.escapeRegex(a.term),d=new RegExp("^"+c,"i"),e=jQuery.grep(arr_subscriber_user,function(a){return d.test(a.label||a.value||a)}),f=new RegExp(c,"i"),g=jQuery.grep(arr_subscriber_user,function(a){return jQuery.inArray(a,e)<0&&f.test(a.label||a.value||a)});b(e.concat(g))},focus:function(a,b){},select:function(a,b){return jQuery("#subscribe-auth-"+b.item.id).length<1&&jQuery("#divSubscriberList").append("<li id='subscribe-auth-"+b.item.id+"' class='contact-list' >"+b.item.imghtml+"<a href='#removeSubscriber' class='delete_row'>×</a><br/><a class='subscribe-title heading' target='_blank' href='"+b.item.user_edit_link+"'>"+b.item.label+"</a><input type='hidden' name='subscribe_to[]' value='"+b.item.id+"' /></li>"),jQuery("#subscriber_user_ac").val(""),!1}}).data("ui-autocomplete")._renderItem=function(a,b){return jQuery("<li></li>").data("ui-autocomplete-item",b).append("<a class='ac-subscribe-selected'>"+b.imghtml+"&nbsp;"+b.label+"</a>").appendTo(a)},jQuery(document).on("click","a[href=#removeSubscriber]",function(a){a.preventDefault(),jQuery(this).parent().remove()}))}catch(a){}},initAutoResponseSettings:function(){jQuery("#rthd_enable_auto_response_mode")&&(jQuery(".rthd-dayshift-time-end").change(function(){b.initDayValidation(jQuery(this).parent().parent())}),jQuery(".rthd-dayshift-time-start").change(function(){b.initDayValidation(jQuery(this).parent().parent())}),jQuery(".rthd-daynight-am-time-start").change(function(){b.initDayNightValidation(jQuery(this).parent().parent())}),jQuery(".rthd-daynight-am-time-end").change(function(){b.initDayNightValidation(jQuery(this).parent().parent())}),jQuery(".rthd-daynight-pm-time-start").change(function(){b.initDayNightValidation(jQuery(this).parent().parent())}),jQuery(".rthd-daynight-pm-time-end").change(function(){b.initDayNightValidation(jQuery(this).parent().parent())}),jQuery.ajaxPrefilter(function(a,c,d){var e=JSON.stringify(a.data);if(-1!==e.indexOf("action=redux_helpdesk_settings_ajax_save&")){var f=!0;if(0==jQuery("#rthd_enable_auto_response").val())return!0;if(1==jQuery("#rthd_enable_auto_response_mode").val())for(var g=0;7>g;g++){var h=jQuery(".rthd-dayshift-time-start").eq(g).parent().parent();b.initDayValidation(h)||(f=!1)}if(0==jQuery("#rthd_enable_auto_response_mode").val())for(var g=0;7>g;g++){var h=jQuery(".rthd-daynight-am-time-start").eq(g).parent().parent();b.initDayNightValidation(h)||(f=!1)}return f?f:(d.abort(),jQuery(".redux-action_bar input").removeAttr("disabled"),jQuery(document.getElementById("redux_ajax_overlay")).fadeOut("fast"),void jQuery(".redux-action_bar .spinner").fadeOut("fast"))}}))},initDayValidation:function(a){var b=a.find(".rthd-dayshift-time-start").val(),c=a.find(".rthd-dayshift-time-end").val(),d=!0,e=!0;if(-1==b&&-1==c?jQuery(a).next(".rthd-dayshift-error").show().find(".error").removeClass("myerror").html(""):-1==b||-1==c?(jQuery(a).next(".rthd-dayshift-error").show().find(".error").addClass("myerror").html(-1==b?"Please select `Start` time":"Please select `End` time"),d=!1):parseInt(c)<parseInt(b)?(jQuery(a).next(".rthd-dayshift-error").show().find(".error").addClass("myerror").html("Starting Time should be less then ending time"),d=!1):jQuery(a).next(".rthd-dayshift-error").show().find(".error").removeClass("myerror").html(""),d){if(jQuery(a).next(".rthd-dayshift-error").hide(),0==jQuery("#rthd_autoresponse_weekend").val()){for(var f=0;7>f;f++){a=jQuery(".rthd-dayshift-time-start").eq(f).parent().parent();var b=a.find(".rthd-dayshift-time-start").val(),c=a.find(".rthd-dayshift-time-end").val();(-1!=b||-1!=c)&&(e=!1)}e&&(jQuery("#rthd-response-day-error").show().html("please select working time"),d=!1)}}else jQuery("#rthd-response-day-error").hide().html("");return d},initDayNightValidation:function(a){var b=a.find(".rthd-daynight-am-time-start").val(),c=a.find(".rthd-daynight-am-time-end").val(),d=a.find(".rthd-daynight-pm-time-start").val(),e=a.find(".rthd-daynight-pm-time-end").val(),f=!0,g=!0;if(-1==b&&-1==c?jQuery(a).next(".rthd-daynightshift-error").show().find(".am-time-error").removeClass("myerror").html(""):-1==b||-1==c?(jQuery(a).next(".rthd-daynightshift-error").show().find(".am-time-error").addClass("myerror").html(-1==b?"Please select `Start` time":"Please select `End` time"),f=!1):parseInt(c)<parseInt(b)?(jQuery(a).next(".rthd-daynightshift-error").show().find(".am-time-error").addClass("myerror").html("Starting Time should be less then ending time"),f=!1):jQuery(a).next(".rthd-daynightshift-error").show().find(".am-time-error").removeClass("myerror").html(""),-1==d&&-1==e?jQuery(a).next(".rthd-daynightshift-error").show().find(".pm-time-error").removeClass("myerror").html(""):-1==d||-1==e?(jQuery(a).next(".rthd-daynightshift-error").show().find(".pm-time-error").addClass("myerror").html(-1==d?"Please select `Start` time":"Please select `End` time"),f=!1):parseInt(e)<parseInt(d)?(jQuery(a).next(".rthd-daynightshift-error").show().find(".pm-time-error").addClass("myerror").html("Starting Time should be less then ending time"),f=!1):jQuery(a).next(".rthd-daynightshift-error").show().find(".pm-time-error").removeClass("myerror").html(""),f){if(jQuery(a).next(".rthd-daynightshift-error").hide(),0==jQuery("#rthd_autoresponse_weekend").val()){for(var h=0;7>h;h++){a=jQuery(".rthd-daynight-am-time-start").eq(h).parent().parent();var b=a.find(".rthd-daynight-am-time-start").val(),c=a.find(".rthd-daynight-am-time-end").val(),d=a.find(".rthd-daynight-pm-time-start").val(),e=a.find(".rthd-daynight-pm-time-end").val();(-1!=b||-1!=c||-1!=d||-1!=e)&&(g=!1)}g&&(jQuery("#rthd-response-daynight-error").show().html("please select working time"),f=!1)}}else jQuery("#rthd-response-daynight-error").hide().html("");return f},initBlacklistConfirmationOrRemove:function(){jQuery(document).on("click","#rthd_ticket_contacts_blacklist",function(a){a.preventDefault();var b=jQuery(this).data("action"),c=new Object;c.post_id=jQuery("#post-id").val(),"remove_blacklisted"==b?(c.action="rthd_remove_blacklisted_contact",jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:c,success:function(a){a.status&&(jQuery("#contacts-blacklist-container").html("").hide(),jQuery("#contacts-blacklist-action").html(a.addBlacklist_ui).show())},error:function(a,b,c){jQuery("#contacts-blacklist-container").html("Some error with ajax request!!").show()}})):"blacklisted_confirmation"==b&&(c.action="rthd_show_blacklisted_confirmation",jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:c,success:function(a){a.status&&(jQuery("#contacts-blacklist-container").html(a.confirmation_ui).show(),jQuery("#contacts-blacklist-action").hide())},error:function(a,b,c){jQuery("#contacts-blacklist-container").html("Some error with ajax request!!").show()}}))})},initAddContactBlacklist:function(){jQuery(document).on("click","#rthd_ticket_contacts_blacklist_yes",function(a){a.preventDefault();var b=jQuery(this).data("action"),c=new Object;c.post_id=jQuery("#post-id").val(),"blacklisted_contact"==b&&(c.action="rthd_add_blacklisted_contact"),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:c,success:function(a){a.status&&(jQuery(".confirmation-container").hide(),jQuery("#contacts-blacklist-action").html(a.remove_ui).show())},error:function(a,b,c){jQuery("#contacts-blacklist-container").html("Some error with ajax request!!").show()}})}),jQuery(document).on("click","#rthd_ticket_contacts_blacklist_no",function(a){a.preventDefault(),jQuery("#contacts-blacklist-container").html("").hide(),jQuery("#contacts-blacklist-action").show()})}};b.init()});